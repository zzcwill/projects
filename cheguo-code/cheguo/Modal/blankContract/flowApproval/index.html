<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../../common/plugs/bootstrap-3.3.5/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../../../common/css/style.min.css"/>
    <link rel="stylesheet" href="../../../common/plugs/layer/skin/layer.css?rev=433a1dd8df8c4851be764e907f6d758a"/>
    <link rel="stylesheet" href="../../../common/plugs/bootstrap-table/dist/bootstrap-table.min.css">
    <link rel="stylesheet" href="../../../common/plugs/bootstrap-datepicker/css/bootstrap-datetimepicker.min.css"/>
    <link rel="stylesheet" href="../../../css/main.css"/>
    <title></title>
    <style>
        .timeApply{
            position: absolute;
            right: 10px;
            top: 0;
        }
    </style>
</head>
<body class="gray-bg">
    <div id="flowApproval">
        <div class="wrapper wrapper-content">
            <div class="row">
                <div class="ibox float-e-margins">
                    <div class="ibox-content">
                        <div class="page-header" style="position: relative">
                            <h3 class="text-center">{{head}}</h3>
                            <div class="timeApply" v-show="type">
                                <label class="control-label">申请时间:</label>
                                <input type="text" class="applyTime" disabled="disabled">
                            </div>
                        </div>
                        <form class="form-horizontal" id="contractForm">
                            <input id="id" name="id" type="hidden">
                            <fieldset :disabled="isDisabled()">
                                <div class="form-group form-group-sm">
                                    <v-input label="领用编号" name="applyNo" class="applyNo required" readonly="readonly"></v-input>
                                    <v-select label="领用方式" name="expressType" class="required" :options="[{value:'1',name:'快递'},{value:'2',name:'自取'}]"></v-select>
                                    <v-select label="合作银行" name="bankId" class="required" id="bankId" v-on:change="getContract"></v-select>
                                </div>
                                <div class="form-group form-group-sm">
                                    <v-input label="所属机构" name="applyOrgName" v-if="isDisabled()"></v-input>
                                    <v-select label="所属机构" name="applyOrgId" class="required" id="orgId" v-on:change="orgChoose" v-else></v-select>
                                    <v-input label="所属区域" name="applyAreaName" v-if="applyRole == 'area' && isDisabled()"></v-input>
                                    <v-select label="所属区域" name="applyAreaId" class="required" id="areaGet" v-if="applyRole == 'area' && !isDisabled()" v-on:change="getAreaName"></v-select>
                                    <v-input label="申请人" name="applyUserName" readonly="readonly"></v-input>
                                    <!--表单隐藏域-->
                                    <input type="hidden" name="applyOrgName">
                                    <input type="hidden" name="bankName">
                                    <input type="hidden" name="stockType" v-model="stockType">
                                    <!--<input type="hidden" name="approvequantity">-->
                                    <input type="hidden" name="applyAreaName">
                                </div>
                                <div class="page-header"></div>
                                <div class="form-group form-group-sm" v-for="item in contractApplyQuantityList" v-show = "contractApplyQuantityList.length > 0">
                                    <v-input :label="item.contractTypeName" class="contractNumber"  placeholder="请输入合同数" :m.sync="item.applyQuantity"></v-input>
                                    <v-input label="机构在库" class="contractNumber" placeholder="请输入合同数" :m.sync="item.branchQuantity" v-if="type == 2"></v-input>
                                    <v-input label="银行在库"  class="contractNumber" placeholder="请输入合同数" :m.sync="item.bankQuantity" v-if="type == 3"></v-input>
                                </div>
                                <div class="form-group form-group-sm">
                                    <v-input label="申请备注" placeholder="请输入备注" name="applyRemark"></v-input>
                                </div>
                            </fieldset>
                            <div class="form-group form-group-sm">
                                <v-input label="业务审批备注" placeholder="请输入备注" name="approveRemark" readonly="readonly" v-if="type == 3 || viewType == 2 || viewType == 3"></v-input>
                                <text-area label="业务审批备注" name="approveRemark" cols="30" rows="8" v-if="type == 2"></text-area>
                            </div>
                            <div class="form-group form-group-sm">
                                <text-area label="银行审批备注" name="approveRemarkBank" cols="30" rows="8" v-if="type == 3"></text-area>
                                <v-input label="银行审批备注" placeholder="请输入备注" name="approveRemarkBank" readonly="readonly" v-if="viewType == 3"></v-input>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="ibox float-e-margins">
                    <div class="ibox-content">
                        <form class="form-horizontal">
                            <div class="form-group form-group-sm">
                                <div class="col-md-24 text-right" v-if="applyRole && isModify != 'false'">
                                    <button type="button" class="btn btn-primary btn-sm" v-on:click="nextApproval">提交</button>
                                    <!--<button type="button" class="btn btn-primary btn-sm" v-on:click="areaCommit" v-if="applyRole == 'area'">提交</button>-->
                                    <button type="button" class="btn btn-primary btn-sm" v-on:click="save">保存</button>
                                    <button type="button" class="btn btn-primary btn-sm" v-on:click="cancel">取消</button>
                                </div>
                                <div class="col-md-24 text-right" v-if="applyRole && isModify =='false'">
                                    <button type="button" class="btn btn-primary btn-sm" v-on:click="cancel">返回</button>
                                </div>
                                <div class="col-md-24 text-right" v-if="type">
                                    <button type="button" class="btn btn-primary btn-sm" v-on:click="nextApproval">提交</button>
                                    <button type="button" class="btn btn-primary btn-sm" v-on:click="pass" v-show="type != 1">不通过</button>
                                    <button type="button" class="btn btn-primary btn-sm" v-on:click="pass" v-if="type == 1">撤销</button>
                                </div>
                            </div>
                        </form>
                        <!--流程流转人员-->
                        <modal-fade id="signModal" title="任务提交" class="modal-lg">
                            <div slot="body">
                                <p>请选择流转人员&nbsp;&nbsp;&nbsp;后续流程环节:<span id="nextNode"></span></p>
                                <!--<v-table id="table_sign" :options="table" ajax="table_sign"></v-table>-->
                                <table id="table_sign" data-ajax="table_sign">
                                    <thead>
                                    <tr>
                                        <th data-switchable="false" data-field="userId" data-formatter="handle_sign" data-events="tableEvent_sign">选择
                                        </th>
                                        <th data-field="organization">机构名称</th>
                                        <th data-field="department">部门</th>
                                        <th data-field="userName">姓名</th>
                                        <th data-field="taskCount">当前代办量</th>
                                    </tr>
                                    </thead>
                                </table>
                            </div>
                            <div slot="foot">
                                <input type="hidden" id="signUserName" name="" />
                                <button type="button" class="btn btn-primary" id="select-sign-btn">确定</button>
                                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                            </div>
                        </modal-fade>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="../../../common/js/jquery-2.1.1.min.js?rev=eb649edd14c8348e9f34a8ca6157c2b6"></script>
<script src="../../../common/js/vue.min.js"></script>
<script src="../../../common/plugs/bootstrap-3.3.5/js/bootstrap.min.js?rev=4becdc9104623e891fbb9d38bba01be4"></script>
<script src="../../../common/plugs/layer/layer.js?rev=8962f047eeb03c06cf8200de1bf8ab99"></script>
<script src="../../../common/js/mock.js"></script>
<script src="../../../common/js/jquery.values.js"></script>
<script src="../../../common/plugs/jquery-validation/dist/jquery.validate.min.js?rev=3b00d60f87e893caf2649eff0d48813a"></script>
<script src="../../../common/plugs/jquery-validation/dist/additional-methods.js?rev=1512011716000"></script>
<script src="../../../common/plugs/jquery-validation/dist/localization/messages_zh.js?rev=6979ac84406e8c982e578736d368b3f8"></script>
<script src="../../../common/plugs/bootstrap-table/dist/bootstrap-table.min.js"></script>
<script src="../../../common/plugs/bootstrap-table/dist/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="../../../common/plugs/bootstrap-datepicker/bootstrap-datetimepicker.min.js"></script>
<script src="../../../common/plugs/bootstrap-datepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script type="text/javascript" charset="utf-8">
    $("head").append([
        '<script src="../../../common/js/URL.js"><\/script>',
        '<script src="../../../common/js/iframeCommon.js"><\/script>',
        '<script src="../../../common/js/flow.js"><\/script>',
        '<script src="../../../common/js/vueComponent.js"><\/script>',
        '<script src="../../../js/blankContract/flowApproval/index.js"><\/script>'
    ].join(""));
</script>
</html>